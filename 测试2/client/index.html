<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>社团管理系统 - 登录</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .bg-gradient-primary {
                background: linear-gradient(135deg, #165DFF 0%, #0E42D2 100%);
            }
            .card-shadow {
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            }
            .input-focus {
                @apply focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- 左侧品牌区域 -->
        <div class="hidden md:flex md:w-1/2 bg-gradient-primary p-12 text-white flex-col justify-center">
            <div class="max-w-lg mx-auto">
                <h1 class="text-4xl font-bold mb-6 flex items-center">
                    <i class="fa fa-university mr-3"></i>
                    校园社团管理系统
                </h1>
                <p class="text-lg opacity-90 mb-10">高效管理社团活动与成员，提升校园管理效率</p>
                
                <div class="space-y-6">
                    <div class="flex items-start">
                        <div class="bg-white/20 p-3 rounded-lg mr-4">
                            <i class="fa fa-check-square-o text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-1">便捷的成员管理</h3>
                            <p class="opacity-80">简化成员加入与退出流程，一键导出统计数据</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start">
                        <div class="bg-white/20 p-3 rounded-lg mr-4">
                            <i class="fa fa-calendar-check-o text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-1">高效的活动管理</h3>
                            <p class="opacity-80">活动申报、审批与记录一体化管理</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 右侧登录表单 -->
        <div class="w-full md:w-1/2 flex items-center justify-center p-6 md:p-12">
            <div class="w-full max-w-md">
                <!-- 移动端Logo -->
                <div class="md:hidden flex justify-center mb-8">
                    <h1 class="text-2xl font-bold text-primary flex items-center">
                        <i class="fa fa-university mr-2"></i>
                        社团管理系统
                    </h1>
                </div>
                
                <div class="bg-white rounded-xl p-8 card-shadow">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">登录系统</h2>
                    
                    <form id="loginForm" class="space-y-5">
                        <div>
                            <label for="username" class="block text-sm font-medium text-gray-700 mb-1">用户名</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fa fa-user text-gray-400"></i>
                                </div>
                                <input type="text" id="username" name="username" required
                                    class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg input-focus transition duration-200"
                                    placeholder="请输入用户名">
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex justify-between mb-1">
                                <label for="password" class="block text-sm font-medium text-gray-700">密码</label>
                            </div>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fa fa-lock text-gray-400"></i>
                                </div>
                                <input type="password" id="password" name="password" required
                                    class="w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg input-focus transition duration-200"
                                    placeholder="请输入密码">
                                <button type="button" id="togglePassword" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600">
                                    <i class="fa fa-eye-slash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="flex items-center">
                            <input type="checkbox" id="rememberMe" name="rememberMe" class="h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary">
                            <label for="rememberMe" class="ml-2 block text-sm text-gray-700">记住我</label>
                        </div>
                        
                        <button type="submit" class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-2.5 px-4 rounded-lg transition duration-200 transform hover:-translate-y-0.5 hover:shadow-md">
                            登录
                        </button>
                    </form>
                    
                    <div class="mt-6 text-center">
                        <p class="text-gray-600">
                            默认管理员账号：admin / 123456
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 密码显示/隐藏切换
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');
        
        togglePassword.addEventListener('click', () => {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            // 切换图标
            togglePassword.querySelector('i').classList.toggle('fa-eye');
            togglePassword.querySelector('i').classList.toggle('fa-eye-slash');
        });
        
        // 登录表单提交
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // 简单验证
            if (!username || !password) {
                alert('请输入用户名和密码');
                return;
            }
            
            try {
                const response = await fetch('http://localhost:3000/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        username,
                        password,
                        rememberMe: document.getElementById('rememberMe').checked
                    })
                });
                
                // 检查响应状态
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.success) {
                    // 登录成功，存储token和用户信息
                    localStorage.setItem('token', data.token);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    window.location.href = 'dashboard.html';
                } else {
                    alert(data.message || '登录失败，请检查用户名和密码');
                }
            } catch (error) {
                console.error('登录错误:', error);
                alert('服务器连接失败，请确保后端已启动并正常运行');
            }
        });
    </script>
</body>
</html>
